let u=null,i=null,l=null,d=null;const f=()=>"dominator-"+Math.random().toString(36).substr(2,9),h=t=>{var r;if(!t)return"";if(t===document.body)return"/html/body";let e=0;const n=((r=t.parentElement)==null?void 0:r.children)||[];for(let c=0;c<n.length;c++){const o=n[c];if(o===t){const a=h(t.parentElement),s=t.tagName.toLowerCase();return`${a}/${s}[${e+1}]`}o.tagName===t.tagName&&e++}return""},m=t=>{if(!t)return"";if(t===document.body)return"body";let e=t.tagName.toLowerCase();if(t.id)return e+=`#${t.id}`,e;if(t.className&&typeof t.className=="string"){const n=t.className.split(" ").filter(r=>r);n.length>0&&(e+=`.${n.join(".")}`)}else t.classList&&t.classList.length>0&&(e+=`.${Array.from(t.classList).join(".")}`);return t.parentElement&&t.parentElement!==document.body&&(e=`${m(t.parentElement)} > ${e}`),e},g=(t,e=0)=>{var n;try{const r=f(),c={};for(let a=0;a<t.attributes.length;a++){const s=t.attributes[a];c[s.name]=s.value}const o={id:r,tagName:t.tagName,attributes:c,textContent:((n=t.textContent)==null?void 0:n.trim())||"",children:[],xpath:h(t),cssSelector:m(t),depth:e};if(t.setAttribute("data-dominator-id",r),e<50)for(let a=0;a<t.children.length;a++){const s=g(t.children[a],e+1);s.parentId=r,o.children.push(s)}return o}catch(r){throw new Error(`Failed to process DOM element: ${r.message}`)}},p=()=>{try{return!document||!document.documentElement?{domTree:null,error:"Document not available"}:{domTree:g(document.documentElement)}}catch(t){return{domTree:null,error:`Failed to get DOM tree: ${t.message||"Unknown error"}`}}},y=t=>{if(i&&(document.body.removeChild(i),i=null),u&&u.classList.remove("dominator-highlighted"),u=t,!t)return;t.classList.add("dominator-highlighted");const e=t.getBoundingClientRect();i=document.createElement("div"),i.style.position="fixed",i.style.border="2px solid #0ea5e9",i.style.borderRadius="3px",i.style.top=`${e.top+window.scrollY}px`,i.style.left=`${e.left+window.scrollX}px`,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.pointerEvents="none",i.style.zIndex="2147483647",i.style.boxShadow="0 0 0 2000px rgba(14, 165, 233, 0.1)",document.body.appendChild(i),t.scrollIntoView({behavior:"smooth",block:"center"})},b=t=>document.querySelector(`[data-dominator-id="${t}"]`),E=t=>{t?(l||(l=document.documentElement.outerHTML),d?(document.open(),document.write(d),document.close()):v()):l&&(document.open(),document.write(l),document.close())},v=()=>{d||(document.querySelectorAll('div[class*="nav"], div[class*="menu"], div[id*="nav"], div[id*="menu"]').forEach(o=>{o.hasAttribute("role")||o.setAttribute("role","navigation")}),document.querySelectorAll('div[class*="header"], div[id*="header"]').forEach(o=>{o.hasAttribute("role")||o.setAttribute("role","banner")}),document.querySelectorAll('div[class*="footer"], div[id*="footer"]').forEach(o=>{o.hasAttribute("role")||o.setAttribute("role","contentinfo")}),document.querySelectorAll("img:not([alt])").forEach(o=>{o.alt="Image"}),document.querySelectorAll("input:not([aria-label]):not([aria-labelledby]):not([title])").forEach(o=>{const a=o.type;o.setAttribute("aria-label",`${a} field`)}),d=document.documentElement.outerHTML)},x=()=>{const t=document.createElement("style");t.textContent=`
    .dominator-highlighted {
      outline: 2px solid #0ea5e9 !important;
      outline-offset: -2px !important;
    }
  `,document.head.appendChild(t)},$=()=>{x(),chrome.runtime.onMessage.addListener((t,e,n)=>{if(t.action==="getDOMTree")try{const r=p();n(r)}catch(r){n({domTree:null,error:`Error processing DOM tree: ${r.message||"Unknown error"}`})}else if(t.action==="highlightNode"){const r=b(t.nodeId);y(r),n({success:!0})}else t.action==="toggleEnhancedDOM"?(E(t.enabled),n({success:!0})):t.action==="ping"&&n({success:!0,message:"Content script is active"});return!0});try{chrome.runtime.sendMessage({action:"contentScriptReady"})}catch{}};$();
//# sourceMappingURL=content.js.map
