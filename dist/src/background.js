const r=new Set;chrome.runtime.onInstalled.addListener(()=>{});chrome.tabs.onUpdated.addListener((t,a,e)=>{a.status==="complete"&&e.url&&e.url.startsWith("http")&&chrome.scripting.executeScript({target:{tabId:t},files:["src/content.js"]}).then(()=>{r.add(t)}).catch(()=>{})});chrome.runtime.onMessage.addListener((t,a,e)=>{var n;if(t.action==="contentScriptReady"&&((n=a.tab)!=null&&n.id))return r.add(a.tab.id),e({success:!0}),!0;if(t.action==="checkContentScript"&&t.tabId){const c=r.has(t.tabId);if(c)e({isLoaded:c});else{try{chrome.scripting.executeScript({target:{tabId:t.tabId},files:["src/content.js"]}).then(()=>{r.add(t.tabId),e({isLoaded:!0,injected:!0})}).catch(i=>{e({isLoaded:!1,error:i.message})})}catch(i){e({isLoaded:!1,error:String(i)})}return!0}}return t.action==="getAIExplanation"?(setTimeout(()=>{e({explanation:`This appears to be a ${t.tagName} element used for ${t.tagName==="DIV"?"grouping content":t.tagName==="BUTTON"?"user interaction":t.tagName==="NAV"?"navigation":"containing content"}. ${t.tagName==="DIV"&&!t.attributes.role?"Consider using a more semantic element or adding a role attribute for better accessibility.":""}`})},500),!0):!1});chrome.tabs.onRemoved.addListener(t=>{r.delete(t)});
//# sourceMappingURL=background.js.map
